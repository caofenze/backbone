<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>
			Backbone.js Example
		</title>
		<link rel="stylesheet" href="css/master.css" type="text/css" media="screen" />
		<script type="text/javascript" src="js/lib/jquery.js"></script>
		<script type="text/javascript" src="js/lib/underscore.js"></script>
		<script type="text/javascript" src="js/lib/backbone.js"></script>
		<script type="text/javascript" src="js/init.js"></script>
		<script type="text/javascript" src="js/models.js"></script>
		<script type="text/javascript" src="js/collections.js"></script>
		<script type="text/javascript" src="js/views.js"></script>
		<script type="text/javascript" src="js/routers.js"></script>
		<script type="text/javascript" src="js/application.js"></script>
	</head>
	<body>
		<div class="wrapper">
			<div id="main"></div>
			<div class="list"></div>
			<div id="list"></div>
			<div id="item"></div>
			<div id="item2">
			<div>1</div>
			</div>


			<div class="section team-list">
				<div class="team-element">
				</div>
			</div>
			<div>
				<ul class="team-list">
				</ul>
			</div>
			<script id="teamTemplate" type="text/template">
				<%= name %>
			</script>
		</div>
		<script type="text/javascript">

		var tpl = new App.Models.Team().defaults.tpl;


		var AppView = Backbone.View.extend({
			el : $(".list"),
			el2 : $("#list"),
			el3 : $("#item"),

			template : _.template("<h3>Hello <%=world%> </h3>"),

			template2 : _.template(tpl),

			initialize : function(user){
				this.render();
				this.append(user);
			},
		    render: function(){
		    	$('#main').append('<h1>一级标题</h1>');
		  	},
		  	append : function(user){
		  		this.el.append('<ul><li>1</li><li>2</li><li>3</li><ul>');

		  		this.el2.html(this.template({world:' world!'}));

		  		var data = user.itemData;

		  		for(var i=0;i<data.length;i++){
		  			this.el3.append(this.template2({
			  			houseCode:data[i].houseCode,
			  			listPicUrl:data[i].listPicUrl,
			  			titleString :data[i].titleString,
			  			picNum:data[i].picNum,
						frameOrientation:data[i].frameOrientation,
						floorInfo:data[i].floorInfo,
						finishYear:data[i].finishYear,
						schoolInfoString:data[i].schoolInfoString,
						subwayInfoString:data[i].subwayInfoString,
						signTime:data[i].signTime,
						signSource:data[i].signSource,
						unitPrice:data[i].unitPrice,
						signPrice:data[i].signPrice 
					}));
		  		}
		  		
		  	}
		});
		var User = Backbone.Model.extend({
		    urlRoot: '/backbonejs/data/data.js'
		});
		
		var user = new User();
		user.fetch({
		    success: function (user){
		        //console.log(user.toJSON());
		        new AppView(user.toJSON());
		    }
		});

		</script>
	</body>
</html>
